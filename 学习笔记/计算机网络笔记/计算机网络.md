[TOC]



# 什么是因特网及其组成

**成千上万的网络设备共同组成了因特网**

**主机**=**端系统**（hosts=en system）由于运行网络应用

**通信链路**

光纤，铜线，无线网，组成

传输链路；宽带

**路由**

向前转发数据报（数据报=一段数据）

**协议**：**控制发送和接受消息**

e.g.,tcp,ip,http,ethernet

**internet:网络的网络**

层次结构

Internet和intranets

**Internet标准**

rfc

iete



# **交换**

以何种形式将数据传送给另外一个计算机呢，总的来说可以分为三种：电路交换，报文交换，分组交换。

**电路交换**：就是我们一开始使用的那种电话线接网，是独占式的交换方式，会先路由找到指定的一条路线，然后独占这个路线进行数据交换。

但是这样独占肯定是不行的应为如果一次交换就会在交换时独占一条线路这样的作法不合理，所以就提出了多路复用的概念，就是将一条线路通过分割作同时为多条线路使用：频分复用，时分复用，码分复用，波分复用四种。

**报文交换：**报文交换就不再是之前那种独占式的交换了，它会将一个数据包装为一个数据报，就是为数据加上个头，然后发送出去。

**分组交换：**分组交换就是将报文交换的数据报分割为多个组来一次一次的提交出去，在上一个组到了第一个交换机并提交出去时，下一个组就发送了。

首先思考一下计算机网络是干嘛的很明显，计算机网罗的目的一定是要将计算机之间相互通信连接，而我们首先想到的就是我直接把两台计算机用线路连接起来就可以了确实，这样可以使得两台计算机之间相互通信，但是如果随着计算机数量的增加而我们要是他们都相互连结，那么上面这种做法就不太合理了。

# osi七层模型功能分析

## **物理层**（物理上的）

那么要解决这个问题我们想一下，是不是可以将各个计算机之间的线通过一个设备进行管理呢，或者说是所有的计算机都连接到一个中心设备上由他来管理消息传输，集线器就是这样一个设备，如果计算机1想要给计算机4发送消息那么集线器是怎么找到计算机4的呢，下面分析一下发送消息的过程，计算机1发送消息给计算机4，计算机1会把消息发给集线器并广播给所有的计算机计算机4收到消息以看是我的就接受到了数据其他的计算机会把这个消息丢弃而集线器之间的线是由双绞线构成只能同时实现单向传送，所以如果同时计算机1和计算机2都进行广播那么就有可能会将两个消息进行杂糅这是一个问题。所以说物理层就是在物理层次上的链路连接

## **数据链路层**（mac物理寻址）

为了解决上面这个问题我们引入了交换机和物理地址的概念，交换机使用网线（8根线）替换了双绞线（4根线）的以实现了双工（在接受的同时也可以发送）并负责存储各个计算机物理地址（mac地址）和在交换机中所对应端口，一旦计算机1发送消息（这里的消息由源和目标mac地址作为头和具体的数据组成）给计算机4那么会到交换机的mac表中找到对应的物理地址并找到端口将数据交给他，而且交换机也可以实现桥接（将两个交换机连接起来）如果在第一个交换机中找不到对应的物理地址那就会广播发送给所以的人这样消息就传到了另外的交换机中进行之前的操作。但是这样使用交换机的话只能是实现在某个区域内的数据交换不可能全球的见算计都通过交换机连接如果那样的话，一旦一个计算机的消息在第一个交换机中没找到那么就广播给了全球造成了一个全球范围内的数据的洪范。

## **网络层**（ip网络寻址）

上面我们已经实现了将一个区域内的计算机组成为一个网络区域，下面只要我们能将这些网络区域连接起来就能够实现大范围的网络通信了。依照着上面所由问题的解决方法（将数据通信交给中央处理器解决）我们引出了路由器的概念。并且在物理地址这个实际存在的地址之上虚拟出了IP地址这个概念上的地址。我们通过IP地址找到对应的网络在到这个网络里去找到指定的物理地址的机器，这个就是我们大概的想法。这样我们还要对我们的数据报包裹一层新的头这个头包括了源IP和目标IP

## 传输层（port sap寻址（端到端的进程间的））

通过上面三层对数据的包装，我们已经可以找到我们的目标计算机并将数据传输过来，但是我们如今的计算机不可能是只会运行一个应用的，那么我们怎么找到目标应用呢，传输层就是对上层数据的分段和加入指定端口的包装，这样我们目标主机收到的数据就可以对接收到的数据进程一层层的剥离并找到指定的端口

## 会话层（对话控制）

会话层则是对一次会话的控制，比如会话的时间等等。

## 表示层（语法与语义）

这一层是为了将得到的数据进行解析编译，通过指定的语法语义来得到目标编码的过程。

## 应用层（遵循协议处理数据）

应用层则是遵循一定的协议来对数据进行处理。

# tcp/ip四层（五层）模型

**everything over IP** ：  IP可以为所有的应用程序提供服务

## 网络接口层(物理层+数据链路层)

**物理上的网络接口**：物理层的比特传输+数据链路层的相邻网络元素的数据传输

## 网际层（网络层）

**基于IP协议和路由协议等实现的网络寻址**

## 运输层（传输层）

**基于tcp/udp协议**,来实现进程到进程的数据传输

## 应用层

**基于各种协议来支持各种网络应用**

上面我们对网络进行了自底向上的分析，下面则是对其进行自顶向下的深入学习

# 网络应用层学习与理解

## 网络应用的体系结构

客户机/服务器结构c/s

点对点结构p2p

混合结构

**网络应用的进程通信**：

## 网络应用的服务需求

在传输层可以按照需求分为tcp和udp两种协议

tcp是可靠的协议而udp是不可靠协议，具体的什么应用用什么协议要看实际的需求来决定

需求可以分为：可靠，时间，带宽这几种，比如邮件的发送，只要发送过去就行但是不能丢失数据那么就对可靠性有要求，但是对时间是没有什么要求的，而视频播放则是对带宽和时间是有要求的但是可以丢失那么一两帧

## web应用

web应用是依照协议来实现的   协议://host:port/path这种格式来请求和响应

HTTP协议：http://host:port/path（无状态的协议也就是不会记录用户的历史行为，一个客户端在第一次请求和第二次请求时完全一样的响应）

### 非持久性连接

下面分析一下我们的浏览器和服务器进行一次网页访问的过程

我们首先在浏览器中输入了一个url http://www.blog.caohao.club/admin

1.此时我们的浏览器会向指定的主机发送一个建立tcp的请求

2.主机收到请求建立tcp连接，并告诉我们的浏览器

3.浏览器接到消息发送出请求，请求/admin页面

4.主机收到请求，进行页面的传输

5.传输完毕主机则关闭连接

6.浏览器接到页面进行解析，如果页面里还有其他的资源那么就重复上面的操作

我们都知道tcp只一个十分沉重的连接，所以如果按照上面的步骤那么会十分的消耗资源。所以我们对除了页面以外的资源请求都会进行并发的执行而且提出了持久性的连接方式

### 持久性链接

这个意思是在我们网页请求建立了连接之后不要急着去关闭，把后续的资源都接收完了再关闭，就会减少很多的开销

### HTTP消息格式

请求消息：ascii格式-人可直接读

```
Get 请求行可以为get.post.put.delete.head  后面接一个url
host  主机
user-agent  版本
connection  连接状态
accept-language: 接受的语言
```



响应消息

```
状态行 200/404/301/400/505
headerlines 
data
```

telnet www.hit.edu.cn 80

我们可以使用telnet来看一下HTTP响应和请求的过程这个工具是电脑自带的在cmd直接输入就行了

### cookie技术

### web缓存/代理服务器技术

## Email应用

## dns概述

## p2p应用

## socket编程

#### 应用编程接口api

### socketapi概述

### socket api函数

# 传输层学习

提供主机的应用进程之间的逻辑通信，依赖于网络层并对网络层进行增强，对从应用层传过来的数据进行包装和处理并传给网络层。传输层也是依照众多协议来限制的，tcp和udp

### 多路复用和多路分用

多路复用和多路分用技术简单的打个比方就是当计算机1的QQ和微信同时向计算机2和计算机3发送数据在传送

### udp协议

udp协议就是简答的对网络层的包装，是不可靠的协议，而具体的不错，不丢和不乱好我们程序在应用层进行设计

### tcp协议

tcp则是在网络层和应用层之间的一个可靠的传输协议，他会对数据进行很多的约束和检查。

# 网络层学习

网络层的目的就是在网络环境中找到指定的目的主机，网络层是基于路由器来实现的，路由器的两个主要功能就是路由和转发。

如何实现转发，也就是如何实现能够找到目的主机，在路由器中我们会像之前的交换机的处理一样加入路由表，只不过这里的不再是具体的mac地址或者IP地址了而是某个IP范围对应着某个端口来实现的

而网络层将两台主机进行连接的方式也有两种分别是有连接和无连接模式。而具体的无连接模式则是数据包连接模式有链接模式则是虚电路模式。

数据报模式：将数据报分组传输，每次每个数据报的传输路径可能都不一样

虚电路模式：在传输之前会通过路由算法找出指定的一条路线，随后的数据报都按照这个路线来传输，这样就能保证每个数据报的时序是正确的

### IP协议

Internet网络层就是一个典型的无连接模式，而IP协议加上icmp协议就是这个IP网络里的路由协议。





# 数据链路层学习

